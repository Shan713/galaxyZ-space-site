{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="GalaxyZ Workshop Highlight">
  <title>{{ workshop.title }} - GalaxyZ Space</title>

  <link rel="stylesheet" href="{% static 'styles/main.css' %}" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Space+Grotesk:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body {
      color: white;
    }

    .container {
      max-width: 1000px;
      margin: 40px auto;
      padding: 30px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
    }

    .workshop-header {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      align-items: center;
    }

    .poster {
      flex: 1.3;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .poster img {
      max-width: 450px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
    }

    .details {
      flex: 2;
      text-align: right;
    }

    .details h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .details p {
      margin: 0.5rem 0;
    }

    .section {
      margin-top: 30px;
    }

    .video-section {
      margin-top: 40px;
    }

    .video-section iframe {
      width: 100%;
      height: 400px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.15);
    }

    .logo-wrapper {
      width: 100%;
      display: flex;
      justify-content: center;
      margin-top: 60px;
    }

    .logo-wrapper img {
      max-width: 150px;
      height: auto;
    }

    #testimonials {
      margin-top: 30px;
    }
    .meet-section {
      margin-top: 40px;
    }

    .meet-lock-wrapper {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      backdrop-filter: blur(4px);
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
      cursor: pointer;
      transition: 0.3s;
    }

    .meet-lock-wrapper:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    .locked-meet-box i {
      color: #fff;
      opacity: 0.7;
    }

    .locked-meet-box p {
      color: #ccc;
      margin-top: 10px;
      margin-bottom: 10px;
    }

  </style>
</head>

<body>
  <div class="space-background">
    <div class="stars"></div>
    <div class="twinkling"></div>
    <div class="shooting-stars"></div>
    <div class="nebula"></div>
  </div>

  <div class="logo-wrapper">
    <a href="{% url 'home' %}"><img src="{% static 'assets/frontmoving.png' %}" alt="Logo" /></a>
  </div>

  <div class="container">
    <div class="workshop-header">
      <div class="poster">
        <img src="{{ workshop.poster.url }}" alt="{{ workshop.title }} Poster">
      </div>
  <div class="details">
    <h1>{{ workshop.title }}</h1>
    <p><strong>Instructor:</strong> {{ workshop.instructor }}</p>
    {% if is_registered %}
      <p style="color: green; font-weight: bold;">You are already enrolled in this course!</p>
    {% else %}
      <div class="card-footer" style="font-size: 20px; font-weight: bold; color: #4FFF70;">
        {% if workshop.price == 0 %}
          <span style="text-decoration: line-through;">â‚¹299</span> FREE
        {% else %}
          â‚¹{{ workshop.price }}
        {% endif %}
        <br><br>
        <a href="{% url 'enroll_workshop' workshop.id %}" class="btn btn-glow">Register</a>
      </div>
    {% endif %}
  </div>

    <div class="section">
      <h3>ðŸ“˜ Workshop Overview</h3>
      <p>{{ workshop.description }}</p>
    </div>

    {% if testimonials %}
    <section id="testimonials">
      <div class="section-header">
        <h2 class="section-title">What Participants <span class="text-gradient">Say</span></h2>
        <p class="section-subtitle">Words from our learners</p>
      </div>

      <div class="testimonial-container">
        <div class="testimonial-track" id="testimonial-track">
          {% for t in testimonials %}
          <blockquote class="testimonial">
            <div class="testimonial-quote">
              <i class="fas fa-quote-left"></i>
              <br>
              <p class="testimonial-text">{{ t.text }}</p>
              <i class="fas fa-quote-right"></i>
            </div>
            <footer class="testimonial-author">- {{ t.author }}</footer>
          </blockquote>
          {% endfor %}
        </div>

        <div class="testimonial-nav">
          <button class="testimonial-nav-btn" onclick="prevTestimonial()"><i class="fas fa-chevron-left"></i></button>
          <button class="testimonial-nav-btn" onclick="nextTestimonial()"><i class="fas fa-chevron-right"></i></button>
        </div>
      </div>
    </section>
    {% endif %}
    {% if workshop.meetLink %}
<div class="meet-section">
  <h3>ðŸ“… Live Session Link</h3>

  {% if is_registered %}
    <p>
      <strong>Join Live:</strong> 
      <a href="{{ workshop.meetLink }}" class="btn btn-glow" target="_blank">
        Click to Join
      </a>
    </p>

  {% else %}
    <div class="meet-lock-wrapper" onclick="promptEnroll()">
      <div class="locked-meet-box">
        <i class="fas fa-lock fa-2x"></i>
        <p>This session link is locked. Enroll to join the live session.</p>
        <button class="btn btn-glow">Buy Course</button>
      </div>
    </div>
  {% endif %}
</div>
{% endif %}

  <script>
    let currentTestimonial = 0;
    const track = document.getElementById('testimonial-track');
    const testimonials = document.querySelectorAll('.testimonial');

    function updateSlider() {
      track.style.transform = `translateX(-${currentTestimonial * 100}%)`;
    }

    function nextTestimonial() {
      currentTestimonial = (currentTestimonial + 1) % testimonials.length;
      updateSlider();
    }

    function prevTestimonial() {
      currentTestimonial = (currentTestimonial - 1 + testimonials.length) % testimonials.length;
      updateSlider();
    }
  </script>
  <script>
  function promptEnroll() {
  if (confirm("This content is locked. Would you like to enroll in this course?")) {
    window.location.href = "{% url 'enroll_workshop' workshop.id %}";
  }
}
</script>
</body>
</html>
